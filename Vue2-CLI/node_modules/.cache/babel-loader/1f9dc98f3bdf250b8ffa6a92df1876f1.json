{"ast":null,"code":"import pubsub from 'pubsub-js';\nimport MyHeader from './components/MyHeader.vue';\nimport MyList from './components/MyList.vue';\nimport MyFooter from './components/MyFooter.vue';\nexport default {\n  name: 'App',\n  components: {\n    MyHeader,\n    MyList,\n    MyFooter\n  },\n\n  data() {\n    return {\n      todos: JSON.parse(localStorage.getItem('todos')) || []\n    };\n  },\n\n  methods: {\n    // 添加一个 todo\n    addTodo(todoObj) {\n      this.todos.unshift(todoObj);\n    },\n\n    // 勾选 or 取消勾选一个 todo\n    checkTodo(id) {\n      this.todos.forEach(todo => {\n        if (todo.id === id) todo.done = !todo.done;\n      });\n    },\n\n    // 删除一个 todo\n    deleteTodo(id) {\n      // filter 不改变原数组\n      this.todos = this.todos.filter(todo => todo.id !== id);\n    },\n\n    // 全选 or 取消全选\n    checkAllTodo(done) {\n      this.todos.forEach(todo => todo.done = done);\n    },\n\n    // 清除所有已经完成的 todo\n    clearAllTodo() {\n      this.todos = this.todos.filter(todo => !todo.done);\n    }\n\n  },\n  watch: {\n    todos: {\n      deep: true,\n\n      handler(value) {\n        localStorage.setItem('todos', JSON.stringify(value));\n      }\n\n    }\n  },\n\n  mounted() {\n    this.$bus.$on('checkTodo', this.checkTodo); // this.$bus.$on('deleteTodo', this.deleteTodo)\n\n    pubsub.subscribe('deleteTodo');\n  },\n\n  beforeDestroy() {\n    this.$bus.$off('checkTodo'); // this.$bus.$off('deleteTodo')\n  }\n\n};","map":{"version":3,"mappings":"AAaA;AACA;AACA;AACA;AAEA;EACAA,WADA;EAEAC;IAAAC;IAAAC;IAAAC;EAAA,CAFA;;EAGAC;IACA;MACAC;IADA;EAGA,CAPA;;EAQAC;IACA;IACAC;MACA;IACA,CAJA;;IAKA;IACAC;MACA;QACA;MACA,CAFA;IAGA,CAVA;;IAWA;IACAC;MACA;MACA;IACA,CAfA;;IAgBA;IACAC;MACA;IACA,CAnBA;;IAoBA;IACAC;MACA;IACA;;EAvBA,CARA;EAiCAC;IACAP;MACAQ,UADA;;MAEAC;QACAC;MACA;;IAJA;EADA,CAjCA;;EAyCAC;IACA,2CADA,CAEA;;IACAC;EACA,CA7CA;;EA8CAC;IACA,4BADA,CAEA;EACA;;AAjDA","names":["name","components","MyHeader","MyList","MyFooter","data","todos","methods","addTodo","checkTodo","deleteTodo","checkAllTodo","clearAllTodo","watch","deep","handler","localStorage","mounted","pubsub","beforeDestroy"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\r\n  <div id=\"root\">\r\n    <div class=\"todo-container\">\r\n      <div class=\"todo-wrap\">\r\n        <MyHeader @addTodo=\"addTodo\" />\r\n        <MyList :todos=\"todos\" />\r\n        <MyFooter :todos=\"todos\" @checkAllTodo=\"checkAllTodo\" @clearAllTodo=\"clearAllTodo\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import pubsub from 'pubsub-js'\r\n  import MyHeader from './components/MyHeader.vue'\r\n  import MyList from './components/MyList.vue'\r\n  import MyFooter from './components/MyFooter.vue'\r\n\r\n  export default {\r\n    name: 'App',\r\n    components: { MyHeader, MyList, MyFooter },\r\n    data() {\r\n      return {\r\n        todos: JSON.parse(localStorage.getItem('todos')) || []\r\n      }\r\n    },\r\n    methods: {\r\n      // 添加一个 todo\r\n      addTodo(todoObj) {\r\n        this.todos.unshift(todoObj)\r\n      },\r\n      // 勾选 or 取消勾选一个 todo\r\n      checkTodo(id) {\r\n        this.todos.forEach((todo) => {\r\n          if (todo.id === id) todo.done = !todo.done\r\n        })\r\n      },\r\n      // 删除一个 todo\r\n      deleteTodo(id) {\r\n        // filter 不改变原数组\r\n        this.todos = this.todos.filter(todo => todo.id !== id)\r\n      },\r\n      // 全选 or 取消全选\r\n      checkAllTodo(done) {\r\n        this.todos.forEach(todo => todo.done = done)\r\n      },\r\n      // 清除所有已经完成的 todo\r\n      clearAllTodo() {\r\n        this.todos = this.todos.filter(todo => !todo.done)\r\n      }\r\n    },\r\n    watch: {\r\n      todos: {\r\n        deep: true,\r\n        handler(value) {\r\n          localStorage.setItem('todos', JSON.stringify(value))\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$bus.$on('checkTodo', this.checkTodo)\r\n      // this.$bus.$on('deleteTodo', this.deleteTodo)\r\n      pubsub.subscribe('deleteTodo',)\r\n    },\r\n    beforeDestroy() {\r\n      this.$bus.$off('checkTodo')\r\n      // this.$bus.$off('deleteTodo')\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  /*base*/\r\n  body {\r\n    background: #fff;\r\n  }\r\n\r\n  .btn {\r\n    display: inline-block;\r\n    padding: 4px 12px;\r\n    margin-bottom: 0;\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    cursor: pointer;\r\n    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),\r\n      0 1px 2px rgba(0, 0, 0, 0.05);\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .btn-danger {\r\n    color: #fff;\r\n    background-color: #da4f49;\r\n    border: 1px solid #bd362f;\r\n  }\r\n\r\n  .btn-danger:hover {\r\n    color: #fff;\r\n    background-color: #bd362f;\r\n  }\r\n\r\n  .btn:focus {\r\n    outline: none;\r\n  }\r\n\r\n  .todo-container {\r\n    width: 600px;\r\n    margin: 0 auto;\r\n  }\r\n  .todo-container .todo-wrap {\r\n    padding: 10px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 5px;\r\n  }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}